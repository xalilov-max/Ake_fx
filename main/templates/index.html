{% extends 'base.html' %}
{% load static %}

{% block content %}

<!-- HEADER SECTION - Fullscreen Video Background -->
<div class="header-section position-relative vh-100 ">
    <!-- Fullscreen video background -->
    <video autoplay muted loop playsinline class="header-video w-100 h-100 object-fit-cover">
        <source src="{% static 'videos/header-bg.mp4' %}" type="video/mp4">
        Sizning brauzeringiz videoni qo'llab-quvvatlamaydi.
    </video>
    
    <!-- Gradient overlay -->
    <div class="video-overlay bg-gradient"></div>
    
    <!-- Header content -->
    <div class="header-content container position-relative z-index-2">
        <div class="row justify-content-center text-center">
            <div class="col-lg-10">
                <h1 class="display-3 fw-bold mb-4 text-white animate__animated animate__fadeInDown">
                    ake.fx Trading Akademiyasiga Xush Kelibsiz
                </h1>
                <p class="lead fs-3 mb-5 text-white-80 animate__animated animate__fadeIn animate__delay-1s">
                    Forex va kriptovalyutalar bo'yicha professional bilimlar
                </p>
                <div class="d-flex gap-3 justify-content-center animate__animated animate__fadeInUp animate__delay-1s">
                    <a href="#courses" class="btn btn-primary btn-lg px-4 rounded-pill shadow-lg">
                        <i class="bi bi-arrow-right-circle me-2"></i>Kurslarni ko'rish
                    </a>
                    <a href="#mentors" class="btn btn-outline-light btn-lg px-4 rounded-pill">
                        <i class="bi bi-people-fill me-2"></i>Mentorlar
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scroll indicator -->
    <div class="scroll-down animate__animated animate__fadeIn animate__delay-2s">
        <a href="#courses" class="text-white">
            <i class="bi bi-chevron-down fs-4"></i>
        </a>
    </div>
</div>

<!-- COURSES SECTION - With cards redesign -->
<section id="courses" class="py-6 bg-light">
    <div class="container">
        <div class="section-header text-center mb-5">
            <span class="badge bg-primary-gradient mb-3 px-3 py-2 rounded-pill fs-6">Ta'lim</span>
            <h2 class="display-5 fw-bold mb-3">Ake.fx Kurslari</h2>
            <div class="divider mx-auto my-3">
                <span class="divider-line bg-primary"></span>
                <span class="divider-dot bg-primary"></span>
                <span class="divider-line bg-primary"></span>
            </div>
            <p class="text-muted fs-5">Trading bo'yicha professional kurslarimiz bilan tanishing</p>
        </div>
        
        <div class="row g-4">
            {% for course in courses %}
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm rounded-4 overflow-hidden transition-all hover-lift">
                    <div class="position-relative">
                        <a href="{% url 'course_detail' course.id %}">
                            <img src="{{ course.image.url }}" class="card-img-top" alt="{{ course.title }}" style="height: 220px; object-fit: cover;">
                            <div class="position-absolute top-0 end-0 m-3">
                                <span class="badge bg-success rounded-pill px-3 py-2 fs-6">${{ course.price }}</span>
                            </div>
                        </a>
                    </div>
                    <div class="card-body p-4">
                        <div class="d-flex align-items-center mb-3">
                            <span class="badge bg-primary-soft text-primary me-2">{{ course.level }}</span>
                            <span class="text-muted small"><i class="bi bi-clock me-1"></i>{{ course.duration }}</span>
                        </div>
                        <h5 class="card-title fw-bold mb-3">
                            <a href="{% url 'course_detail' course.id %}" class="text-decoration-none text-dark stretched-link">
                                {{ course.title }}
                            </a>
                        </h5>
                        <p class="card-text text-muted mb-4">{{ course.description|truncatechars:120 }}</p>
                        <div class="d-flex align-items-center">
                            <div class="me-3">
                                <img src="{{ course.mentor.image.url }}" alt="{{ course.mentor.full_name }}" 
                                     class="rounded-circle border border-2 border-white" width="36" height="36" style="object-fit: cover;">
                            </div>
                            <div>
                                <small class="d-block text-muted">Mentor</small>
                                <small class="fw-bold">{{ course.mentor.full_name }}</small>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer bg-white border-0 p-4 pt-0">
                        <div class="d-grid">
                            <a href="{% url 'course_buy' course.id %}" class="btn btn-primary rounded-pill py-2">
                                <i class="bi bi-cart3 me-2"></i>Sotib olish
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- MENTORS SECTION -->
<section id="mentors" class="py-6 bg-white">
    <div class="container">
        <div class="section-header text-center mb-5">
            <span class="badge bg-primary-gradient mb-3 px-3 py-2 rounded-pill fs-6">Professional</span>
            <h2 class="display-5 fw-bold mb-3">Mentorlar</h2>
            <div class="divider mx-auto my-3">
                <span class="divider-line bg-primary"></span>
                <span class="divider-dot bg-primary"></span>
                <span class="divider-line bg-primary"></span>
            </div>
            <p class="text-muted fs-5">Professional bilim va tajriba bilan o'rtoqlashadigan mutaxassislarimiz</p>
        </div>
        
        <div class="row g-4 justify-content-center">
            {% for mentor in mentors %}
            <div class="col-md-3">
                <div class="mentor-card text-center p-4 rounded-4 shadow-sm h-100 transition-all hover-lift bg-white border border-2 border-light">
                    {% if mentor.image %}
                    <div class="mentor-img-wrapper mb-4 mx-auto position-relative" style="width: 150px; height: 150px;">
                        <img src="{{ mentor.image.url }}" 
                             alt="{{ mentor.full_name }}" 
                             class="rounded-circle border border-3 border-primary p-1 shadow-sm" 
                             width="150" 
                             height="150" 
                             style="object-fit: cover;">
                    </div>
                    {% else %}
                    <div class="mentor-img-wrapper mb-4 mx-auto position-relative" style="width: 150px; height: 150px;">
                        <div class="rounded-circle border border-3 border-primary p-1 shadow-sm bg-light d-flex align-items-center justify-content-center w-100 h-100">
                            <i class="bi bi-person-fill text-primary" style="font-size: 4rem;"></i>
                        </div>
                    </div>
                    {% endif %}
                    <h5 class="fw-bold mb-2">{{ mentor.full_name }}</h5>
                    <p class="text-primary small mb-3 fw-bold">{{ mentor.specialty }}</p>
                    <p class="small text-muted mb-4">{{ mentor.experience }} yillik tajriba</p>
                    <a href="{% url 'mentor_detail' mentor.id %}" class="btn btn-outline-primary btn-sm rounded-pill px-4 border-2">
                        <i class="bi bi-person-lines-fill me-1"></i>Profilni ko'rish
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- REVIEWS SECTION - Simplified Design -->
<section id="reviews" class="py-6 bg-light">
    <div class="container">
        <div class="section-header text-center mb-5">
            <span class="badge bg-primary-gradient mb-3 px-3 py-2 rounded-pill fs-6">kurslar haqida</span>
            <h2 class="display-5 fw-bold mb-3">O'quvchilar fikrlari</h2>
            <div class="divider mx-auto my-3">
                <span class="divider-line bg-primary"></span>
                <span class="divider-dot bg-primary"></span>
                <span class="divider-line bg-primary"></span>
            </div>
            <p class="text-muted fs-5">Kurslarimizdagi talabalarning haqiqiy tajribalari</p>
        </div>
        
        <div class="row g-4">
            {% for review in reviews %}
            <div class="col-md-4">
                <div class="testimonial-card bg-white p-4 h-100 rounded-4 shadow-sm border-start border-4 border-primary">
                    <div class="d-flex align-items-center mb-3">
                        <div class="me-3">
                            <div class="rounded-circle bg-primary-soft d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                                <i class="bi bi-person-fill text-primary fs-4"></i>
                            </div>
                        </div>
                        <div>
                            <h6 class="fw-bold mb-0">{{ review.student.full_name }}</h6>
                            <small class="text-muted">O'quvchi</small>
                        </div>
                    </div>
                    <div class="rating mb-3">
                        {% for i in "12345" %}
                        <i class="bi bi-star-fill text-warning"></i>
                        {% endfor %}
                    </div>
                    <blockquote class="mb-0">
                        <p class="fst-italic text-muted">"{{ review.comment }}"</p>
                    </blockquote>
                    <div class="mt-3 text-end">
                        <small class="text-muted">{{ review.created_at|date:"d F Y" }}</small>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-5">
            <a href="#" class="btn btn-outline-primary rounded-pill px-4">
                <i class="bi bi-chat-square-text me-2"></i>Barcha sharhlarni ko'rish
            </a>
        </div>
    </div>
</section>

<!-- STATS SECTION -->
<section class="py-5 bg-primary text-white">
    <div class="container">
        <div class="row g-4 text-center">
            <div class="col-md-3">
                <div class="p-3">
                    <h2 class="display-4 fw-bold mb-2 counter" data-target="1200">0</h2>
                    <p class="mb-0 text-uppercase small">O'quvchilar</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="p-3">
                    <h2 class="display-4 fw-bold mb-2 counter" data-target="24">0</h2>
                    <p class="mb-0 text-uppercase small">Kurslar</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="p-3">
                    <h2 class="display-4 fw-bold mb-2 counter" data-target="15">0</h2>
                    <p class="mb-0 text-uppercase small">Mentorlar</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="p-3">
                    <h2 class="display-4 fw-bold mb-2 counter" data-target="98">0</h2>
                    <p class="mb-0 text-uppercase small">% Mamnunlik</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA SECTION -->
<section class="py-6 bg-dark text-white position-relative overflow-hidden">
    <div class="container position-relative z-index-1">
        <div class="row align-items-center">
            <div class="col-lg-8 mb-4 mb-lg-0">
                <h3 class="display-6 fw-bold mb-3">Hoziroq o'rganishni boshlang!</h3>
                <p class="lead mb-0">Professional trading ko'nikmalaringizni rivojlantirish uchun bugungi kunda ro'yxatdan o'ting</p>
            </div>
            <div class="col-lg-4 text-lg-end">
                <a href="#courses" class="btn btn-primary btn-lg rounded-pill px-4 py-3 shadow-lg">
                    <i class="bi bi-arrow-right-circle me-2"></i>Kurslarni ko'rish
                </a>
            </div>
        </div>
    </div>
    <div class="position-absolute top-0 end-0 w-100 h-100 bg-pattern opacity-10"></div>
</section>

<!-- Custom styles -->
<style>
    /* Bootstrap icons */
    @import url("https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css");
    /* Animate.css */
    @import url("https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css");
    
    /* Header section - Fullscreen video */
    .header-section {
        position: relative;
        overflow: hidden;
    }
    
    .header-video {
        position: absolute;
        top: 0;
        left: 0;
        min-width: 100%;
        min-height: 100%;
        z-index: 0;
    }
    
    .bg-gradient {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, rgba(13, 110, 253, 0.85) 0%, rgba(111, 66, 193, 0.85) 100%);
        z-index: 1;
    }
    
    .header-content {
        position: relative;
        z-index: 2;
        padding-top: 80px;
    }
    
    .text-white-80 {
        color: rgba(255, 255, 255, 0.8);
    }
    
    .scroll-down {
        position: absolute;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 2;
        animation: bounce 2s infinite;
    }
    
    @keyframes bounce {
        0%, 20%, 50%, 80%, 100% {transform: translateY(0) translateX(-50%);}
        40% {transform: translateY(-20px) translateX(-50%);}
        60% {transform: translateY(-10px) translateX(-50%);}
    }
    
    /* General section styling */
    .py-6 {
        padding-top: 5rem;
        padding-bottom: 5rem;
    }
    
    /* Card hover effects */
    .transition-all {
        transition: all 0.3s ease;
    }
    
    .hover-lift:hover {
        transform: translateY(-10px);
        box-shadow: 0 1rem 3rem rgba(0, 0, 0, 0.1) !important;
    }
    
    /* Divider styling */
    .divider {
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .divider-line {
        width: 30px;
        height: 2px;
        display: inline-block;
    }
    
    .divider-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        display: inline-block;
        margin: 0 10px;
    }
    
    /* Badge styling */
    .badge.bg-primary-gradient {
        background: linear-gradient(135deg, #0d6efd 0%, #6f42c1 100%);
    }
    
    .bg-primary-soft {
        background-color: rgba(13, 110, 253, 0.1);
    }
    
    /* Testimonial cards */
    .testimonial-card {
        transition: all 0.3s ease;
    }
    
    .testimonial-card:hover {
        transform: translateY(-5px);
    }
    
    /* Rating stars */
    .rating {
        color: #ffc107;
        letter-spacing: 2px;
    }
    
    /* Background pattern */
    .bg-pattern {
        background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }
    
    /* Z-index helpers */
    .z-index-1 {
        z-index: 1;
    }
    
    .z-index-2 {
        z-index: 2;
    }
    
    /* Object fit */
    .object-fit-cover {
        object-fit: cover;
    }
</style>

<!-- Counter animation script -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const counters = document.querySelectorAll('.counter');
        const speed = 200;
        
        counters.forEach(counter => {
            const updateCount = () => {
                const target = +counter.getAttribute('data-target');
                const count = +counter.innerText;
                const increment = target / speed;
                
                if(count < target) {
                    counter.innerText = Math.ceil(count + increment);
                    setTimeout(updateCount, 1);
                } else {
                    counter.innerText = target;
                }
            };
            
            // Start counting when element is in viewport
            const observer = new IntersectionObserver((entries) => {
                if(entries[0].isIntersecting) {
                    updateCount();
                    observer.unobserve(counter);
                }
            });
            
            observer.observe(counter);
        });
    });
</script>

{% endblock %}